<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
  <meta charset="utf-8"> <!-- 字符编码：utf-8 -->
  <meta name="renderer" content="webkit"> <!-- 针对多核浏览器优先使用 webkit 内核 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <!-- 优先使用 IE 最新版本和 Chrome -->
  <meta http-equiv="Cache-Control" content="no-siteapp" /> <!-- 禁止百度手机自动转码 -->
  <meta name="google" value="notranslate" /> <!-- 禁止Chrome自动翻译 -->
  <meta name="format-detection" content="telphone=no, email=no"/> <!-- 忽略页面中的数字识别为电话，忽略email识别 -->
  <title>Document</title> <!-- SEO：定义页面标题 -->
  <meta name="keywords" content="keywords" /> <!-- SEO：定义页面关键词 -->
  <meta name="description" content="description" /> <!-- SEO：页面描述内容 -->
  <meta name="author" content="Charles Lim,hi@oulve.com" /> <!-- SEO：定义页面作者 -->
  <meta name="robots" content="index,follow"> <!-- SEO：定义页面搜索引擎索引方式 -->
  <link rel="shortcut icon" type="image/x-icon" href="http://oulve.com/favicon.ico" />
  <link rel="bookmark" href="http://oulve.com/favicon.ico" />
  <!-- normalize.css：css 初始化(react)，统一各浏览器下的文档空白样式 -->
  <link href="https://cdn.bootcss.com/normalize/3.0.3/normalize.min.css" rel="stylesheet">
  <!-- html5shiv.js：使 IE-678 兼容 HTML5 标签 -->
  <!--[if lte IE 8]>
    <script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <![endif]-->
  <!-- pure-grids：css 栅栏布局，依赖 normalize.css -->
  <link href="https://cdn.bootcss.com/pure/0.6.0/grids-min.css" rel="stylesheet">
  <!-- responsive：css 栅栏布局添加响应式，IE-678 下降级处理 -->
  <!--[if lte IE 8]>
    <link href="https://cdn.bootcss.com/pure/0.6.0/grids-responsive-old-ie-min.css" rel="stylesheet">
  <![endif]-->
  <!--[if gt IE 8]><!-->
    <link href="https://cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css" rel="stylesheet">
  <!--<![endif]-->
  <!-- font-awesome.css：图标库，使用示例：<i class="fa fa-camera-retro"></i> -->
  <link href="https://cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
  <!-- holder.js：DEMO图片生成脚本，使用示例：<img src="holder.js/300x200?text=Hello&bg=#67DFEB"> -->
  <script src="https://cdn.bootcss.com/holder/2.9.0/holder.min.js"></script>
  <style>
    html, button, input, select, textarea, .pure-g [class *= "pure-u"] { /* 修改Pure默认字体栈及字体样式 */
      font-family: "Helvetica Neue", "Luxi Sans", "DejaVu Sans", Tahoma, "Hiragino Sans GB", "Microsoft Yahei", sans-serif;
      font-size: 16px;
      color: #888;
      text-shadow: 0px 1px 0px #fff;
    }

    *{ box-sizing:border-box; }
    /* *::before,*::after{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;} */

    .banner{position:relative;width:100%;overflow:hidden;}
    .carousel{position:relative;list-style:none;padding:0;}
    .carousel .item{position:relative; float:left;}
    .carousel .active{display:block;}
    .carousel img{display:block;max-width:100%;height:auto;}
    .banner .pointer{position:absolute;bottom:0;padding:15px;}
    .banner .pager-prev, .banner .pager-next{position:absolute;display:none;top:50%;margin-top:-25px;}
    .banner .pager-prev{left:20px;}
    .banner .pager-next{right:20px;}
    .banner:hover .pager-prev,.banner:hover .pager-next{display:block;}

    .pager{list-style:none;padding:0;text-align:center;clear:both;}
    .pager li{display:inline-block;}
    .pager li a{color:#333;border:solid 1px #ddd;border-radius:15px;padding:5px 15px;transition:all 1s cubic-bezier(0.175, 0.885, 0.32, 1) 0s;}
    .pager li a:hover{background-color:#f5f5f5;transition:all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1) 0s;}
    .pager-prev, .pager .pager-prev, .pager-next, .pager .pager-next{font-size:36px;padding:0;color:#ddd;border:solid 1px #ddd;background-color:rgba(255, 255, 255, .2);width:50px;height:50px;line-height:45px;display:inline-block;border-radius:50%;text-align:center;cursor:pointer;}
    .pager-prev:hover, .pager-next:hover{background-color:rgba(0, 0, 0, .2);}
    .pager-group li{float:left;display:inline-block;}
    .pager-group li:not(:first-child):not(:last-child){border-radius:0;}
    .pager-group li a:first-child{border-radius:4px 0 0 4px;}
    .pager-group li a:last-child{border-radius:0 4px 4px 0;}
    .pointer{padding:0px;}
    .pointer li{border:solid 1px #ddd;width:10px;height:10px;margin:1px;display:inline-block;border-radius:10px;cursor:pointer;}
    .pointer .active{border:none;background:#ddd;width:12px;height:12px;margin:0;}
  </style>

</head>
<body>
<div class="banner">
    <div class="carousel">
      <div class="item">
        <div style="background-color: #000000;">
          <div style="margin: 0 auto;max-width: 1000px;">
            <img src="holder.js/1000x300">
          </div>
        </div>
      </div>
      <div class="item"><div style="height: 300px; background: #666;">轮播二</div></div>
      <div class="item"><div style="height: 300px; background: #666;">轮播三</div></div>
      <div class="item"><div style="height: 300px; background: #666;">轮播四</div></div>
    </div>
  </div>

  <script src="https://cdn.bootcss.com/jquery/2.1.0/jquery.min.js"></script>
  <script type="text/javascript">
  $(function(){
    $('.banner').each(function(){ // 遍历banner
        var e=$(this); // 获取banner的jQ对象
        var pointer=e.attr("data-pointer"); // 获取jQ对象的属性
        var interval=e.attr("data-interval");
        var style=e.attr("data-style");
        var items=e.attr("data-item");
        var items_s=e.attr("data-small");
        var items_m=e.attr("data-middle");
        var items_b=e.attr("data-big");
        var num=e.find(".carousel .item").length; // 获取轮播走马灯中总的栏目数
        var win=$(window).width(); // 获取当前窗口的宽度
        var i=1;

        if(interval==null){interval=5}; // 设置单栏目轮播时长，默认为5s
        if(items==null || items<1){items=1}; // items 当前可视范围内展示的栏目数
        if(items_s!=null && win>760){items=items_s};
        if(items_m!=null && win>1000){items=items_m};
        if(items_b!=null && win>1200){items=items_b};

        var itemWidth=Math.ceil(e.outerWidth()/items); // 获取栏目宽度：ceil方法返回大于参数值的最小整数、  outerWidth返回jQ对象本体加padding加border的可视范围宽度
        var page=Math.ceil(num/items); // 获取页数：ceil方法返回大于参数值的最小整数、num为轮播走马灯中总的栏目数、items为当前可视范围内展示的栏目数
        e.find(".carousel .item").css("width",itemWidth+ "px"); // 设置每个栏目的宽度
        e.find(".carousel").css("width",itemWidth*num + "px"); // 设置轮播走马灯的宽度

        var carousel=function(){
            i++;
            if(i>page){i=1;}
            // 设置循环
            $showbanner(e,i,items,num);
        };
        // 设置定时任务
        var play=setInterval(carousel,interval*600);

        // 事件：当鼠标进入元素区域的时候触发 -》中止事件
        e.mouseover(function(){clearInterval(play);});
        // 事件：当鼠标离开元素区域的时候触发 -》新启事件
        e.mouseout(function(){play=setInterval(carousel,interval*600);});

        if(pointer!=0 && page>1){ // pointer 是否显示点状提示
            var point='<ul class="pointer"><li value="1" class="active"></li>';
            for (var j=1;j<page;j++){
                /* SignOulve 轮播图修复压缩后空格消失的BUG 2015.3.15 */
                point=point+' '+'<li value="'+(j+1)+'"></li>';
            };
            point=point+'</ul>';
            var pager=$(point);
            if(style!=null){pager.addClass(style);};
            e.append(pager);

            /* SignOulve 轮播图修改 2015.3.4 */
            /*pager.css("left",e.outerWidth()*0.5 - pager.outerWidth()*0.5+"px");*/
            pager.css("left","50%");
            pager.css("margin-left",-pager.outerWidth()*0.5);

            pager.find("li").click(function(){
                $showbanner(e,$(this).val(),items,num);
            });
            /*var lefter=$('<div class="pager-prev icon-angle-left"></div>');
            var righter=$('<div class="pager-next icon-angle-right"></div>');*/
            var lefter=$('<div class="pager-prev"><i class="fa fa-angle-left"></i></div>');
            var righter=$('<div class="pager-next"><i class="fa fa-angle-right"></i></div>');
            if(style!=null){lefter.addClass(style);righter.addClass(style);};
            e.append(lefter);
            e.append(righter);

            lefter.click(function(){
                i--;
                if(i<1){i=page;}
                $showbanner(e,i,items,num);
            });
            righter.click(function(){
                i++;
                if(i>page){i=1;}
                $showbanner(e,i,items,num);
            });
        };
    });

    /*
    * 轮播动画
    * 1：计算carousel左移距离，并进行移动
    * 2：取消当前栏目的active，激活下一个栏目的active
    */
    $showbanner=function(e,i,items,num){
        /* SignOulve 轮播图修改 2015.3.29 添加通屏模式下的Banner背景颜色兼容*/
        if($(".layout-banner") != ''){
            var itemColor = e.find(".item-"+i).css("background-color");
            $(".layout-banner").css("background-color", itemColor);
        }
        /* 使用方法：添加 .layout-banner .item-i；添加 style="background-color: #000000;" */

        var after=0,left=0;
        left = - Math.ceil(e.outerWidth()/items)*(items)*(i-1);
        if(i*items > num){
          after=i*items-num;
          left= - Math.ceil(e.outerWidth()/items)*(num-items);
        }
        e.find(".carousel").stop(true, true).animate({"left":left+"px"}, 800);
        console.log(left);
        e.find(".pointer li").removeClass("active");
        console.log(i);
        e.find(".pointer li").eq(i-1).addClass("active");
    };
  });
  </script>
</body>
</html>
